<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Narra — automatización de contenidos con IA para e-commerce | getnarra.app</title>
    <meta name="description" content="Narra automatiza la creación de contenido con un pipeline multiagente: del esquema al pulido SEO. Mantén la voz de tu marca. Prueba gratuita de 7 días." />
    <meta name="robots" content="index, follow" />
    <link rel="icon" type="image/svg+xml" href="../assets/favicon.svg" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Narra — automatización de contenidos con IA para e-commerce" />
    <meta property="og:description" content="Narra automatiza la creación de contenido con un pipeline multiagente: del esquema al pulido SEO. Mantén la voz de tu marca." />
    <meta property="og:image" content="https://getnarra.app/assets/og-image.svg" />
    <meta property="og:url" content="https://getnarra.app/es/" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Narra — automatización de contenidos con IA para e-commerce" />
    <meta name="twitter:description" content="Narra automatiza la creación de contenido con un pipeline multiagente: del esquema al pulido SEO. Mantén la voz de tu marca." />
    <meta name="twitter:image" content="https://getnarra.app/assets/og-image.svg" />
    <link rel="alternate" hreflang="pl" href="/pl/" />
    <link rel="alternate" hreflang="en" href="/" />
    <link rel="alternate" hreflang="es" href="/es/" />
    <link rel="alternate" hreflang="fr" href="/fr/" />
    <link rel="alternate" hreflang="de" href="/de/" />
    <link rel="alternate" hreflang="x-default" href="/" />
    <link rel="stylesheet" href="../styles.css" />
    <style>
        :root {
            color-scheme: light;
            --navy: #0a2540;
            --purple: #6c5ce7;
            --offwhite: #f7f7fb;
            --ink: #1a2a3a;
            --muted: #6b7280;
            --radius-lg: 1rem;
            --shadow-md: 0 20px 45px rgba(10, 37, 64, 0.12);
            font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        }
        body {
            margin: 0;
            min-height: 100vh;
            background: var(--offwhite);
            color: var(--ink);
        }
        a {
            color: inherit;
            text-decoration: none;
        }
        .shell {
            max-width: min(1120px, 92vw);
            margin: 0 auto;
        }
        header.site-header {
            position: sticky;
            top: 0;
            z-index: 100;
            background: rgba(247, 247, 251, 0.94);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(26, 42, 58, 0.08);
        }
        .hero {
            position: relative;
            padding: clamp(4rem, 10vw, 6.5rem) 0 clamp(3rem, 8vw, 5rem);
            overflow: hidden;
        }
        .hero::before {
            content: "";
            position: absolute;
            inset: 0;
            background: radial-gradient(circle at top left, rgba(108, 92, 231, 0.18), transparent 55%),
                radial-gradient(circle at bottom right, rgba(10, 37, 64, 0.12), transparent 60%);
            z-index: -2;
        }
        .hero::after {
            content: "\201C Donde las ideas se convierten en historias. \201D";
            position: absolute;
            font-size: clamp(2.75rem, 8vw, 5.5rem);
            font-weight: 700;
            color: rgba(108, 92, 231, 0.08);
            right: clamp(-6rem, -10vw, -2rem);
            bottom: clamp(-2rem, -6vw, 0rem);
            white-space: nowrap;
            pointer-events: none;
        }
        .hero h1 {
            font-size: clamp(2.75rem, 4vw, 4rem);
            letter-spacing: -0.02em;
            margin-bottom: 1rem;
            color: var(--navy);
        }
        .hero p.hero-tagline {
            font-weight: 600;
            color: var(--purple);
            margin-bottom: 1.5rem;
        }
        .hero p.hero-description {
            max-width: 52ch;
            line-height: 1.6;
            color: var(--muted);
            font-size: 1.05rem;
        }
        .primary-cta {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.85rem 1.65rem;
            border-radius: 999px;
            background: var(--purple);
            color: #fff;
            font-weight: 600;
            border: none;
        }
        .primary-cta:hover {
            background: #5844d6;
        }
        .primary-cta:focus-visible,
        .secondary-cta:focus-visible,
        .ghost-link:focus-visible,
        .menu-toggle:focus-visible,
        .nav-link:focus-visible {
            outline: 3px solid rgba(108, 92, 231, 0.45);
            outline-offset: 3px;
            border-radius: 999px;
        }
    </style>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "Narra",
      "applicationCategory": "BusinessApplication",
      "operatingSystem": "Web",
      "url": "https://getnarra.app/es/",
      "description": "Narra automatiza la creación de contenido con un pipeline multiagente: del esquema al pulido SEO.",
      "offers": [
        {
          "@type": "Offer",
          "name": "Starter",
          "price": "15",
          "priceCurrency": "EUR",
          "availability": "https://schema.org/PreOrder"
        },
        {
          "@type": "Offer",
          "name": "Pro",
          "price": "45",
          "priceCurrency": "EUR",
          "availability": "https://schema.org/PreOrder"
        },
        {
          "@type": "Offer",
          "name": "Enterprise",
          "price": "0",
          "priceCurrency": "EUR",
          "availability": "https://schema.org/PreOrder",
          "description": "Ofertas Enterprise personalizadas bajo demanda."
        }
      ]
    }
    </script>
</head>
<body>
    <a class="skip-link" href="#main">Saltar a contenido principal</a>
    <header class="site-header" aria-label="Navegación principal">
        <div class="shell nav-shell">
            <a class="brand" href="#hero" aria-label="Narra – inicio">
                <img src="../assets/logo.svg" alt="Narra" width="120" height="32" decoding="async" />
            </a>
            <button class="menu-toggle" type="button" aria-expanded="false" aria-controls="primary-navigation">
                <span class="menu-label">Menú</span>
                <span class="menu-icon" aria-hidden="true"></span>
            </button>
            <nav id="primary-navigation" class="site-nav" aria-label="Secciones de la página">
                <a class="nav-link" href="#features">Funciones</a>
                <a class="nav-link" href="#workflow">Cómo funciona</a>
                <a class="nav-link" href="#pricing">Precios</a>
                <a class="nav-link" href="#faq">FAQ</a>
                <a class="nav-link nav-cta" href="#beta">Únete a la beta</a>
                <div class="language-switch">
                    <div class="language-select" data-language-switch>
                        <button class="language-trigger" type="button" data-language-trigger aria-haspopup="listbox" aria-expanded="false" aria-label="Selecciona idioma">
                            <span class="language-trigger-text" data-language-label>English (EN)</span>
                        </button>
                        <ul class="language-options" data-language-menu role="listbox" hidden>
                            <li><button type="button" role="option" data-language-option data-lang="en" data-href="/">English (EN)</button></li>
                            <li><button type="button" role="option" data-language-option data-lang="pl" data-href="/pl/">Polski (PL)</button></li>
                            <li><button type="button" role="option" data-language-option data-lang="es" data-href="/es/">Español (ES)</button></li>
                            <li><button type="button" role="option" data-language-option data-lang="fr" data-href="/fr/">Français (FR)</button></li>
                            <li><button type="button" role="option" data-language-option data-lang="de" data-href="/de/">Deutsch (DE)</button></li>
                        </ul>
                    </div>
                </div>
            </nav>
        </div>
    </header>
    <main id="main">
        <section id="hero" class="hero">
            <div class="shell hero-grid">
                <div class="hero-copy">
                    <h1>Automatiza la producción de contenidos. Conserva la voz de tu marca.</h1>
                    <p class="hero-tagline">Donde las ideas se convierten en historias.</p>
                    <p class="hero-description">Narra es una plataforma de IA que transforma ideas en textos SEO listos para publicar. Pipeline multiagente: esquema → verificación → reescritura → SEO → publicación.</p>
                    <div class="hero-actions">
                        <a class="primary-cta" href="#beta">Únete a la beta</a>
                        <a class="ghost-link" href="#workflow">Ver cómo funciona</a>
                    </div>
                </div>
                <div class="hero-panel" aria-hidden="true">
                    <div class="hero-card">
                        <div class="hero-card-header">
                            <span class="chip">Humano + IA</span>
                            <span class="chip chip-outline">QA en tiempo real</span>
                        </div>
                        <div class="hero-card-body">
                            <p>“Narra mantiene el tono de la marca incluso al publicar automáticamente. Cada artículo pasa por verificación de hechos y revisión SEO antes de salir en vivo.”</p>
                            <ul>
                                <li>Del brief al esquema en 2 minutos</li>
                                <li>Correcciones automáticas con fuentes citadas</li>
                                <li>Metadatos y enlaces internos sin trabajo manual</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <section id="problem" class="section problem">
            <div class="shell problem-inner">
                <div class="problem-copy">
                    <h2>Escribir contenido manualmente te frena.</h2>
                    <p>La mayoría de los equipos dedican más de 6 horas semanales a crear y corregir artículos. La IA multiagente de Narra reduce ese tiempo a minutos, manteniendo el tono de marca y la calidad SEO.</p>
                    <div class="problem-actions">
                        <a class="primary-cta" href="#beta">Ver cómo funciona</a>
                    </div>
                </div>
                <div class="problem-flows" aria-label="Comparación de flujos">
                    <article class="problem-flow manual">
                        <h3>Redacción manual</h3>
                        <p>Redacción manual → Borrador → Revisión → Verificación → SEO → Publicar</p>
                        <span class="flow-duration">(días)</span>
                    </article>
                    <div class="flow-connector" aria-hidden="true">
                        <span class="flow-label">Manual</span>
                        <div class="flow-slider">
                            <div class="flow-slider-track" style="--progress: 72%">
                                <span class="flow-slider-progress"></span>
                                <span class="flow-slider-thumb">→</span>
                            </div>
                        </div>
                        <span class="flow-label">Narra</span>
                    </div>
                    <article class="problem-flow narra">
                        <h3>Narra</h3>
                        <p>Narra → Esquema → Revisión → Publicar</p>
                        <span class="flow-duration">(minutos)</span>
                    </article>
                </div>
            </div>
        </section>
        <section id="features" class="section features">
            <div class="shell section-header">
                <h2>Lo que Narra puede hacer</h2>
                <p>Un equipo de IA multiagente colabora con tu equipo de contenidos para reducir el tiempo de la idea a la publicación.</p>
            </div>
            <div class="shell feature-grid">
                <article class="feature-card">
                    <div class="icon" aria-hidden="true">
                        <span data-feather="share-2"></span>
                    </div>
                    <h3>Pipeline multiagente</h3>
                    <p>Secuencia automatizada del brief a la publicación con controles de calidad en cada paso.</p>
                    <ul>
                        <li>Esquema → verificación → reescritura</li>
                        <li>Puntuación SEO en tiempo real</li>
                        <li>Exportación con un clic a tu CMS</li>
                    </ul>
                </article>
                <article class="feature-card">
                    <div class="icon" aria-hidden="true">
                        <span data-feather="check-circle"></span>
                    </div>
                    <h3>Calidad y control</h3>
                    <p>Gestión de tono “Humano + IA” con vistas previas y sugerencias para editores.</p>
                    <ul>
                        <li>Modo de cocreación con comentarios</li>
                        <li>Seguimiento de revisiones y fuentes</li>
                        <li>Consistencia del tono de marca en cada párrafo</li>
                    </ul>
                </article>
                <article class="feature-card">
                    <div class="icon" aria-hidden="true">
                        <span data-feather="trending-up"></span>
                    </div>
                    <h3>Enriquecimiento SEO</h3>
                    <p>Generación automática de encabezados, metadatos y enlaces internos recomendados.</p>
                    <ul>
                        <li>Brief SEO → estructura H1–H3</li>
                        <li>Título y descripción meta en tu tono de marca</li>
                        <li>Mapa de enlaces internos</li>
                    </ul>
                </article>
                <article class="feature-card">
                    <div class="icon" aria-hidden="true">
                        <span data-feather="link"></span>
                    </div>
                    <h3>Integraciones (próximamente)</h3>
                    <p>Conexiones planificadas con las principales plataformas de e-commerce.</p>
                    <ul>
                        <li>Shoper, WooCommerce, Shopify</li>
                        <li>WordPress y API personalizada</li>
                        <li>Publicación automatizada y webhooks</li>
                    </ul>
                </article>
            </div>
        </section>
        <section id="comparison" class="section comparison">
            <div class="shell section-header">
                <h2>Ahorra horas cada semana con Narra</h2>
                <p>Compara el flujo manual con el pipeline automatizado de Narra.</p>
            </div>
            <div class="shell comparison-card">
                <div class="comparison-table-wrapper">
                    <table class="comparison-table">
                        <thead>
                            <tr>
                                <th scope="col">Aspecto</th>
                                <th scope="col">Flujo manual</th>
                                <th scope="col">Pipeline Narra AI</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <th scope="row">Tiempo por artículo</th>
                                <td>~6 horas</td>
                                <td>10–15 minutos</td>
                            </tr>
                            <tr>
                                <th scope="row">Verificación de datos</th>
                                <td>Manual</td>
                                <td>Automática con fuentes</td>
                            </tr>
                            <tr>
                                <th scope="row">Optimización SEO</th>
                                <td>Opcional</td>
                                <td>Integrada</td>
                            </tr>
                            <tr>
                                <th scope="row">Consistencia</th>
                                <td>Depende del redactor</td>
                                <td>Siempre en tono de marca</td>
                            </tr>
                            <tr>
                                <th scope="row">Publicación</th>
                                <td>Subida manual</td>
                                <td>Exportación al CMS con un clic</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <p class="comparison-note">Los equipos que usan Narra publican 5× más artículos al mes sin contratar más redactores.</p>
                <a class="primary-cta" href="#beta">Únete a la beta</a>
            </div>
        </section>
        <section id="workflow" class="section workflow">
            <div class="shell section-header">
                <h2>Cómo funciona Narra</h2>
                <p>Un pipeline transparente te permite seguir cada etapa desde el brief hasta el artículo listo para publicar.</p>
            </div>
            <div class="shell workflow-grid" role="list">
                <article class="workflow-step" role="listitem">
                    <div class="step-number">1</div>
                    <h3>Brief → esquema</h3>
                    <p>Indica tema, palabras clave y tono. El agente “Compositor” crea un esquema en minutos.</p>
                </article>
                <article class="workflow-step" role="listitem">
                    <div class="step-number">2</div>
                    <h3>Verificación → edición</h3>
                    <p>El agente “Investigador” verifica hechos, adjunta fuentes y marca los elementos que requieren aprobación.</p>
                </article>
                <article class="workflow-step" role="listitem">
                    <div class="step-number">3</div>
                    <h3>SEO → estructura</h3>
                    <p>“Optimizador” genera encabezados H1–H3, metadatos y sugerencias de enlaces internos.</p>
                </article>
                <article class="workflow-step" role="listitem">
                    <div class="step-number">4</div>
                    <h3>Publicar / exportar</h3>
                    <p>“Editor” envía el contenido a tu CMS o exporta Markdown/HTML con metadatos.</p>
                </article>
            </div>
        </section>
        <section id="pricing" class="section pricing">
            <div class="shell section-header">
                <h2>Planes flexibles para equipos de contenido</h2>
                <p>Comienza con una prueba y amplía la colaboración a medida que tu contenido genera ingresos.</p>
            </div>
            <div class="shell pricing-grid">
                <article class="pricing-card" aria-labelledby="plan-starter">
                    <h3 id="plan-starter">Starter</h3>
                    <p class="price"><span>15</span> EUR / mes</p>
                    <p>Configura una marca y genera hasta cuatro artículos al mes.</p>
                    <ul>
                        <li>Un espacio de trabajo para una marca</li>
                        <li>4 artículos cada mes</li>
                        <li>Flujo multiagente del briefing al SEO</li>
                    </ul>
                    <a class="secondary-cta" href="#beta">Solicita acceso</a>
                </article>
                <article class="pricing-card" aria-labelledby="plan-pro">
                    <h3 id="plan-pro">Pro</h3>
                    <p class="price"><span>45</span> EUR / mes</p>
                    <p>Escala contenido para hasta cinco marcas con publicaciones regulares.</p>
                    <ul>
                        <li>Hasta 5 marcas en el espacio de trabajo</li>
                        <li>10 artículos por marca cada mes</li>
                        <li>Colaboración e integraciones con CMS</li>
                    </ul>
                    <a class="secondary-cta" href="#beta">Únete a la beta</a>
                </article>
                <article class="pricing-card" aria-labelledby="plan-enterprise">
                    <h3 id="plan-enterprise">Enterprise</h3>
                    <p class="price price-custom">Precio a medida</p>
                    <p>Para equipos a los que Pro se les queda corto. Oferta dedicada adaptada a tus necesidades.</p>
                    <ul>
                        <li>Gestor de éxito dedicado</li>
                        <li>Automatizaciones e integraciones a medida</li>
                        <li>Volúmenes de contenido y SLA personalizados</li>
                    </ul>
                    <a class="secondary-cta" href="mailto:hello@getnarra.app">Habla con nosotros</a>
                </article>
            </div>
        </section>
        <section id="faq" class="section faq">
            <div class="shell section-header">
                <h2>Preguntas frecuentes</h2>
                <p>¿Tienes más preguntas? Escribe a <a href="mailto:hello@getnarra.app">hello@getnarra.app</a>.</p>
            </div>
            <div class="shell faq-grid">
                <details>
                    <summary>¿Cuánto tarda en implementarse Narra?</summary>
                    <p>Puedes generar tu primer esquema el mismo día. El onboarding incluye un taller de tono de marca y la configuración del glosario.</p>
                </details>
                <details>
                    <summary>¿Puedo editar el contenido antes de publicarlo?</summary>
                    <p>Sí, cada etapa admite edición colaborativa con comentarios. Siempre tienes la aprobación final.</p>
                </details>
                <details>
                    <summary>¿Cómo funciona la verificación de hechos?</summary>
                    <p>El agente Investigador marca los párrafos que necesitan confirmación y enlaza las fuentes para una revisión rápida.</p>
                </details>
                <details>
                    <summary>¿Narra admite varios idiomas?</summary>
                    <p>Sí, la plataforma admite polaco, inglés, español, francés y alemán manteniendo la coherencia del tono de marca.</p>
                </details>
            </div>
        </section>
        <section class="section final-cta">
            <div class="shell final-cta-card">
                <h2>¿Listo para publicar más rápido?</h2>
                <p>Únete a la beta privada y recibe una prueba de 7 días para comprobar cómo Narra transforma tu flujo de trabajo.</p>
                <p>Sin tarjeta de crédito. Configuración en menos de 5 minutos.</p>
                <a class="primary-cta" href="#beta">Únete a la beta</a>
            </div>
        </section>
        <section id="beta" class="section beta-form">
            <div class="shell form-wrapper">
                <div class="form-copy">
                    <h2>Únete a la beta privada</h2>
                    <p>Déjanos tu correo y te contactaremos con una invitación y una prueba de 7 días tras verificar el perfil de tu marca.</p>
                </div>
                <form class="beta" name="beta-es" method="post" data-netlify="true" data-netlify-honeypot="bot-field">
                    <input type="hidden" name="form-name" value="beta-es" />
                    <p class="hidden">
                        <label>No rellenes esto: <input name="bot-field" /></label>
                    </p>
                    <div class="form-row">
                        <label for="email">Correo de trabajo</label>
                        <input id="email" name="email" type="email" placeholder="ana@tutienda.com" required autocomplete="email" />
                    </div>
                    <div class="form-row form-row-inline">
                        <input id="consent" name="consent" type="checkbox" required />
                        <label for="consent">Acepto el contacto en relación con el programa beta de Narra.</label>
                    </div>
                    <button class="primary-cta" type="submit">Únete a la beta</button>
                    <p class="form-message" role="status" aria-live="polite"></p>
                </form>
            </div>
        </section>
    </main>
    <footer class="site-footer" aria-label="Pie de página">
        <div class="shell footer-grid">
            <div>
                <a class="brand" href="#hero" aria-label="Narra – inicio">
                    <img src="../assets/logo.svg" alt="Narra" width="120" height="32" decoding="async" />
                </a>
                <p class="footer-tagline">AI multiagente para crear contenidos listos para publicar.</p>
            </div>
            <nav class="footer-nav" aria-label="Navegación secundaria">
                <h3>Mapa del sitio</h3>
                <a class="footer-link" href="#features">Funciones</a>
                <a class="footer-link" href="#workflow">Cómo funciona</a>
                <a class="footer-link" href="#pricing">Precios</a>
                <a class="footer-link" href="#faq">FAQ</a>
                <a class="footer-link" href="#beta">Únete a la beta</a>
            </nav>
            <div class="language-switch footer-languages">
                <div class="language-select" data-language-switch>
                    <button class="language-trigger" type="button" data-language-trigger aria-haspopup="listbox" aria-expanded="false" aria-label="Selecciona idioma">
                        <span class="language-trigger-text" data-language-label>English (EN)</span>
                    </button>
                    <ul class="language-options" data-language-menu role="listbox" hidden>
                            <li><button type="button" role="option" data-language-option data-lang="en" data-href="/">English (EN)</button></li>
                            <li><button type="button" role="option" data-language-option data-lang="pl" data-href="/pl/">Polski (PL)</button></li>
                        <li><button type="button" role="option" data-language-option data-lang="es" data-href="/es/">Español (ES)</button></li>
                        <li><button type="button" role="option" data-language-option data-lang="fr" data-href="/fr/">Français (FR)</button></li>
                        <li><button type="button" role="option" data-language-option data-lang="de" data-href="/de/">Deutsch (DE)</button></li>
                    </ul>
                </div>
            </div>
        </div>
        <p class="footer-note">© <span data-year></span> Narra. Todos los derechos reservados.</p>
    </footer>
    <script src="https://unpkg.com/feather-icons"></script>
    <script>
        const menuToggle = document.querySelector('.menu-toggle');
        const siteNav = document.querySelector('.site-nav');
        const form = document.querySelector('form.beta');
        const message = document.querySelector('.form-message');
        menuToggle?.addEventListener('click', () => {
            const expanded = menuToggle.getAttribute('aria-expanded') === 'true';
            menuToggle.setAttribute('aria-expanded', String(!expanded));
            siteNav?.classList.toggle('is-open');
        });
        const normalizeLang = (lang) => (lang || '').toLowerCase().split('-')[0];
        const preferredLang = normalizeLang(document.documentElement.lang) || 'en';
        const languageSwitchers = Array.from(document.querySelectorAll('[data-language-switch]'));
        const closeSwitcher = (switcher) => {
            const trigger = switcher.querySelector('[data-language-trigger]');
            const menu = switcher.querySelector('[data-language-menu]');
            if (!trigger || !menu) {
                return;
            }
            switcher.classList.remove('is-open');
            trigger.setAttribute('aria-expanded', 'false');
            menu.hidden = true;
            menu.querySelectorAll('[data-language-option]').forEach((option) => {
                option.tabIndex = -1;
            });
        };
        const openSwitcher = (switcher) => {
            const trigger = switcher.querySelector('[data-language-trigger]');
            const menu = switcher.querySelector('[data-language-menu]');
            if (!trigger || !menu) {
                return;
            }
            switcher.classList.add('is-open');
            trigger.setAttribute('aria-expanded', 'true');
            menu.hidden = false;
        };
        const focusOption = (option) => {
            option.tabIndex = 0;
            option.focus();
        };
        languageSwitchers.forEach((switcher, index) => {
            const trigger = switcher.querySelector('[data-language-trigger]');
            const label = switcher.querySelector('[data-language-label]');
            const menu = switcher.querySelector('[data-language-menu]');
            const options = menu ? Array.from(menu.querySelectorAll('[data-language-option]')) : [];
            if (!trigger || !menu || !options.length) {
                return;
            }
            const fallbackLang = 'en';
            const triggerId = trigger.id || `language-trigger-${index}`;
            trigger.id = triggerId;
            menu.setAttribute('aria-labelledby', triggerId);
            const setActiveOption = (option) => {
                options.forEach((item) => {
                    const isActive = item === option;
                    item.setAttribute('aria-selected', isActive ? 'true' : 'false');
                    item.tabIndex = isActive ? 0 : -1;
                });
                const optionLabel = option.textContent.trim();
                if (label) {
                    label.textContent = optionLabel;
                } else {
                    trigger.textContent = optionLabel;
                }
                trigger.setAttribute('data-selected-lang', option.dataset.lang || '');
            };
            const findOptionFor = (langCode) => options.find((option) => normalizeLang(option.dataset.lang) === langCode);
            const initialOption = findOptionFor(preferredLang) || findOptionFor(fallbackLang) || options[0];
            if (initialOption) {
                setActiveOption(initialOption);
            }
            trigger.addEventListener('click', (event) => {
                event.preventDefault();
                const expanded = trigger.getAttribute('aria-expanded') === 'true';
                if (expanded) {
                    closeSwitcher(switcher);
                } else {
                    languageSwitchers.forEach((other) => {
                        if (other !== switcher) {
                            closeSwitcher(other);
                        }
                    });
                    openSwitcher(switcher);
                    const activeOption = options.find((option) => option.getAttribute('aria-selected') === 'true') || options[0];
                    if (activeOption) {
                        focusOption(activeOption);
                    }
                }
            });
            trigger.addEventListener('keydown', (event) => {
                if (event.key === 'ArrowDown' || event.key === 'ArrowUp') {
                    event.preventDefault();
                    languageSwitchers.forEach((other) => {
                        if (other !== switcher) {
                            closeSwitcher(other);
                        }
                    });
                    openSwitcher(switcher);
                    const activeOption = options.find((option) => option.getAttribute('aria-selected') === 'true') || options[0];
                    const focusTarget = event.key === 'ArrowUp' ? (activeOption || options[options.length - 1]) : (activeOption || options[0]);
                    if (focusTarget) {
                        focusOption(focusTarget);
                    }
                } else if (event.key === 'Enter' || event.key === ' ') {
                    event.preventDefault();
                    trigger.click();
                } else if (event.key === 'Escape') {
                    closeSwitcher(switcher);
                }
            });
            options.forEach((option, optionIndex) => {
                option.tabIndex = option.getAttribute('aria-selected') === 'true' ? 0 : -1;
                option.addEventListener('click', () => {
                    setActiveOption(option);
                    closeSwitcher(switcher);
                    const destination = option.dataset.href;
                    if (destination) {
                        window.location.href = destination;
                    }
                });
                option.addEventListener('keydown', (event) => {
                    if (event.key === 'Enter' || event.key === ' ') {
                        event.preventDefault();
                        option.click();
                    } else if (event.key === 'Escape') {
                        event.preventDefault();
                        closeSwitcher(switcher);
                        trigger.focus();
                    } else if (event.key === 'ArrowDown' || event.key === 'ArrowUp') {
                        event.preventDefault();
                        const offset = event.key === 'ArrowDown' ? 1 : -1;
                        let nextIndex = optionIndex + offset;
                        if (nextIndex < 0) {
                            nextIndex = options.length - 1;
                        } else if (nextIndex >= options.length) {
                            nextIndex = 0;
                        }
                        const nextOption = options[nextIndex];
                        if (nextOption) {
                            setActiveOption(nextOption);
                            focusOption(nextOption);
                        }
                    } else if (event.key === 'Tab') {
                        closeSwitcher(switcher);
                    }
                });
            });
        });
        document.addEventListener('click', (event) => {
            if (!event.target.closest('[data-language-switch]')) {
                languageSwitchers.forEach((switcher) => closeSwitcher(switcher));
            }
        });
        document.addEventListener('keydown', (event) => {
            if (event.key === 'Escape') {
                const activeSwitcher = languageSwitchers.find((switcher) => switcher.classList.contains('is-open'));
                if (activeSwitcher) {
                    const trigger = activeSwitcher.querySelector('[data-language-trigger]');
                    closeSwitcher(activeSwitcher);
                    trigger?.focus();
                }
            }
        });
        if (form && message) {
            form.addEventListener('submit', (event) => {
                event.preventDefault();
                message.textContent = '';
                message.className = 'form-message';
                const formData = new FormData(form);
                const encoded = new URLSearchParams(formData).toString();
                fetch('/', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                    body: encoded
                })
                    .then((response) => {
                        if (response.ok) {
                            form.reset();
                            message.textContent = '¡Gracias! Te enviaremos la invitación en 48 horas.';
                            message.className = 'form-message success';
                        } else {
                            throw new Error('Network error');
                        }
                    })
                    .catch(() => {
                        message.textContent = 'Algo salió mal. Inténtalo de nuevo o ponte en contacto con nosotros.';
                        message.className = 'form-message error';
                    });
            });
        }
        feather.replace();
        const yearEl = document.querySelector('[data-year]');
        if (yearEl) {
            yearEl.textContent = new Date().getFullYear();
        }
    </script>
</body>
</html>
